{
  "git": {
    "commitMessage": "chore: release v${version}",
    "tagName": "v${version}",
    "pushArgs": ["--follow-tags"],
    "requireCleanWorkingDir": false,
    "requireUpstream": false,
    "commit": true,
    "tag": true,
    "push": true
  },
  "github": {
    "release": true,
    "releaseName": "ğŸš€ v${version}",
    "releaseNotes": "npx conventional-changelog-cli -p conventionalcommits"
  },
  "npm": {
    "publish": true,
    "publishArgs": ["--access", "public", "--force"],
    "skipChecks": true,
    "registry": "https://registry.npmjs.org/",
    "force": true,
    "ignoreVersion": true,
    "allowSameVersion": true
  },
  "plugins": {
    "@release-it-plugins/workspaces": {
      "workspaces": ["packages/server", "packages/client"],
      "rootWorkspace": true,
      "updateRootVersion": true,
      "includeWorkspaceRoot": true,
      "version": true,
      "forcePublish": true,
      "syncVersions": true,
      "dependencies": false,
      "devDependencies": false,
      "publish": {
        "packages": ["packages/server", "packages/client"],
        "root": false
      }
    },
    "@release-it/conventional-changelog": {
      "preset": "conventionalcommits",
      "infile": "CHANGELOG.md",
      "releaseCommitMessageFormat": "chore: release v${version}",
      "ignoreRecommendedBump": false,
      "strictSemVer": true
    }
  },
  "hooks": {
    "before:init": [
      "pnpm audit --audit-level moderate",
      "pnpm test",
      "pnpm type:check",
      "pnpm check:fix",
      "echo 'ğŸ” æ£€æŸ¥ç‰ˆæœ¬åŒæ­¥çŠ¶æ€...' && node -e \"const root=require('./package.json').version, client=require('./packages/client/package.json').version, server=require('./packages/server/package.json').version; console.log('ç‰ˆæœ¬çŠ¶æ€:', {root, client, server}); if(root!==client||root!==server) { console.error('âŒ ç‰ˆæœ¬ä¸åŒæ­¥!'); process.exit(1); } else { console.log('âœ… ç‰ˆæœ¬åŒæ­¥æ­£å¸¸'); }\""
    ],
    "before:release": [
      "pnpm clean",
      "pnpm build:packages",
      "echo 'ğŸ“¦ å‘å¸ƒå‰ç‰ˆæœ¬æ£€æŸ¥...' && node -e \"const root=require('./package.json').version, client=require('./packages/client/package.json').version, server=require('./packages/server/package.json').version; console.log('å³å°†å‘å¸ƒç‰ˆæœ¬:', {root, client, server});\""
    ],
    "after:bump": [
      "pnpm build:packages",
      "echo 'ğŸ“ ç‰ˆæœ¬å·æ›´æ–°å®Œæˆï¼ŒéªŒè¯åŒæ­¥...' && node -e \"const root=require('./package.json').version, client=require('./packages/client/package.json').version, server=require('./packages/server/package.json').version; console.log('æ›´æ–°åç‰ˆæœ¬:', {root, client, server});\""
    ],
    "after:release": ["echo \"ğŸ‰ ç‰ˆæœ¬ v${version} å‘å¸ƒå®Œæˆï¼\""]
  }
}
