# å‘å¸ƒæµç¨‹

æœ¬é¡¹ç›®ä½¿ç”¨ **Changesets** è¿›è¡Œç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒï¼Œæ”¯æŒæ­£å¼ç‰ˆæœ¬å’Œé¢„å‘å¸ƒç‰ˆæœ¬çš„è‡ªåŠ¨åŒ–å‘å¸ƒã€‚

## å‘å¸ƒæ–¹å¼æ¦‚è§ˆ

### ğŸš€ è‡ªåŠ¨åŒ–å‘å¸ƒï¼ˆåŸºäº Changesetsï¼‰

è¿™æ˜¯é¡¹ç›®å”¯ä¸€çš„å‘å¸ƒæ–¹å¼ï¼Œå®Œå…¨è‡ªåŠ¨åŒ–ï¼Œæ”¯æŒæ­£å¼ç‰ˆæœ¬å’Œé¢„å‘å¸ƒç‰ˆæœ¬ï¼ˆbeta/rcï¼‰ã€‚

#### å·¥ä½œæµç¨‹

```mermaid
graph TD
    A[å¼€å‘è€…åˆ›å»º PR] --> B[æ·»åŠ  changeset æ–‡ä»¶]
    B --> C[PR åˆå¹¶åˆ° main]
    C --> D[è‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬æ›´æ–° PR]
    D --> E[å®¡æŸ¥å¹¶åˆå¹¶ç‰ˆæœ¬ PR]
    E --> F[è‡ªåŠ¨å‘å¸ƒåˆ° NPM]
    F --> G[è‡ªåŠ¨åˆ›å»º GitHub Release]
    G --> H[è‡ªåŠ¨æ›´æ–° CHANGELOG]
```

#### è¯¦ç»†æ­¥éª¤

1. **å¼€å‘æ–°åŠŸèƒ½æˆ–ä¿®å¤ bug**
   ```bash
   git checkout -b feature/new-feature
   # å¼€å‘ä»£ç ...
   ```

2. **æ·»åŠ  changeset æ–‡ä»¶**
   ```bash
   pnpm changeset
   # æŒ‰ç…§æç¤ºé€‰æ‹©å˜æ›´ç±»å‹ï¼š
   # - patch: ä¿®å¤ bug (0.0.x)
   # - minor: æ–°åŠŸèƒ½ (0.x.0)
   # - major: ç ´åæ€§å˜æ›´ (x.0.0)

   # å¯¹äºé¢„å‘å¸ƒç‰ˆæœ¬ï¼Œé€‰æ‹©ç›¸åº”çš„å‘å¸ƒç±»å‹ï¼š
   # - minor + release type: beta â†’ å‘å¸ƒåˆ° beta æ ‡ç­¾
   # - minor + release type: rc â†’ å‘å¸ƒåˆ° rc æ ‡ç­¾
   ```

3. **æäº¤ PR**
   ```bash
   git add .
   git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
   git push origin feature/new-feature
   ```

4. **åˆå¹¶ PR åˆ° main åˆ†æ”¯å**
   - GitHub Actions ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª "Version Packages" PR
   - è¯¥ PR ä¼šè‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·å’Œ CHANGELOG.md

5. **åˆå¹¶ç‰ˆæœ¬æ›´æ–° PR**
   - GitHub Actions ä¼šè‡ªåŠ¨å‘å¸ƒåˆ° NPM
   - è‡ªåŠ¨åˆ›å»º GitHub Release
   - è‡ªåŠ¨æ¨é€ Git æ ‡ç­¾

#### å‘å¸ƒç»“æœ

âœ… **è‡ªåŠ¨å®Œæˆçš„ä»»åŠ¡ï¼š**
- åŒæ­¥æ›´æ–°æ‰€æœ‰åŒ…ç‰ˆæœ¬ï¼ˆbestmcp, @bestmcp/client, @bestmcp/serverï¼‰
- å‘å¸ƒåˆ° NPMï¼ˆlatest æˆ– beta æ ‡ç­¾ï¼‰
- åˆ›å»º GitHub Releaseï¼ˆåŒ…å«è¯¦ç»†å˜æ›´è¯´æ˜ï¼‰
- æ¨é€ Git æ ‡ç­¾ï¼ˆv1.2.3 æ ¼å¼ï¼‰
- æ›´æ–° CHANGELOG.md
- æ„å»ºå¹¶éƒ¨ç½²æ–‡æ¡£

---

## ğŸ”„ é¢„å‘å¸ƒç‰ˆæœ¬ç®¡ç†

é¡¹ç›®æ”¯æŒ **Beta** å’Œ **RC** é¢„å‘å¸ƒç‰ˆæœ¬ï¼Œç”¨äºåœ¨æ­£å¼å‘å¸ƒå‰è¿›è¡Œæµ‹è¯•å’ŒéªŒè¯ã€‚

### é¢„å‘å¸ƒç‰ˆæœ¬ç±»å‹

- **Beta ç‰ˆæœ¬**: `1.2.3-beta.0`, `1.2.3-beta.1` - ç”¨äºå†…éƒ¨æµ‹è¯•å’Œæ—©æœŸç”¨æˆ·åé¦ˆ
- **RC ç‰ˆæœ¬**: `1.2.3-rc.0`, `1.2.3-rc.1` - ç”¨äºæœ€ç»ˆæµ‹è¯•ï¼Œæ¥è¿‘æ­£å¼å‘å¸ƒ

### é¢„å‘å¸ƒç‰ˆæœ¬å‘å¸ƒæµç¨‹

1. **åˆ›å»ºé¢„å‘å¸ƒ changeset**
   ```bash
   pnpm changeset
   ```

   åœ¨äº¤äº’è¿‡ç¨‹ä¸­é€‰æ‹©ï¼š
   - **ç‰ˆæœ¬ç±»å‹**: `minor` æˆ– `patch`
   - **å‘å¸ƒç±»å‹**: `beta` æˆ– `rc`
   - **æ€»ç»“å˜æ›´å†…å®¹**: è¯¦ç»†è¯´æ˜æ–°åŠŸèƒ½ã€ä¿®å¤æˆ–å˜æ›´

2. **æäº¤ PR åˆ° main åˆ†æ”¯**
   ```bash
   git add .
   git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½ (beta)"
   git push origin feature/new-feature
   ```

3. **è‡ªåŠ¨å‘å¸ƒè¿‡ç¨‹**
   - PR åˆå¹¶åˆ° main åï¼ŒGitHub Actions è‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬æ›´æ–° PR
   - åˆå¹¶ç‰ˆæœ¬æ›´æ–° PR åï¼Œè‡ªåŠ¨å‘å¸ƒåˆ° NPM çš„ `beta` æ ‡ç­¾
   - è‡ªåŠ¨åˆ›å»ºå¸¦é¢„å‘å¸ƒæ ‡è¯†çš„ GitHub Release

### é¢„å‘å¸ƒç‰ˆæœ¬ä¸æ­£å¼ç‰ˆæœ¬çš„åŒºåˆ«

| ç‰¹æ€§ | æ­£å¼ç‰ˆæœ¬ | Beta/RC ç‰ˆæœ¬ |
|------|---------|-------------|
| **NPM æ ‡ç­¾** | `latest` | `beta` |
| **å®‰è£…å‘½ä»¤** | `npm install bestmcp` | `npm install bestmcp@beta` |
| **ç‰ˆæœ¬å·æ ¼å¼** | `1.2.3` | `1.2.3-beta.0` |
| **æ›´æ–°æç¤º** | è‡ªåŠ¨æ›´æ–°ä¸ºæœ€æ–°ç‰ˆ | éœ€è¦æ˜¾å¼æŒ‡å®š `@beta` |
| **å—ä¼—** | ç”Ÿäº§ç”¨æˆ· | æµ‹è¯•ç”¨æˆ·ã€å¼€å‘è€… |

### é¢„å‘å¸ƒç‰ˆæœ¬ä½¿ç”¨åœºæ™¯

- **Beta ç‰ˆæœ¬**:
  - æ–°åŠŸèƒ½å¼€å‘å®Œæˆåçš„é¦–æ¬¡å‘å¸ƒ
  - éœ€è¦ç¤¾åŒºåé¦ˆå’Œæµ‹è¯•
  - API å¯èƒ½ä¼šæ ¹æ®åé¦ˆè°ƒæ•´

- **RC ç‰ˆæœ¬**:
  - åŠŸèƒ½å·²ç¨³å®šï¼Œå‡†å¤‡æ­£å¼å‘å¸ƒ
  - æœ€ç»ˆæµ‹è¯•å’ŒéªŒè¯
  - é™¤éå‘ç°ä¸¥é‡é—®é¢˜ï¼Œå¦åˆ™ä¸æ­£å¼ç‰ˆåŸºæœ¬ä¸€è‡´

### ä»é¢„å‘å¸ƒåˆ°æ­£å¼ç‰ˆæœ¬

1. **åˆ›å»ºæ­£å¼ç‰ˆæœ¬çš„ changeset**
   ```bash
   pnpm changeset
   # é€‰æ‹©ç›¸åŒçš„å˜æ›´ç±»å‹ï¼Œä½†å‘å¸ƒç±»å‹ç•™ç©ºï¼ˆé»˜è®¤æ­£å¼ç‰ˆï¼‰
   ```

2. **æ­£å¸¸å‘å¸ƒæµç¨‹**
   - æäº¤ PR åˆ° main åˆ†æ”¯
   - è‡ªåŠ¨å‘å¸ƒåˆ° `latest` æ ‡ç­¾

---

## ğŸ“‹ å‘å¸ƒå‰æ£€æŸ¥æ¸…å•

### å‘å¸ƒå‰å¿…æŸ¥

- [ ] æ‰€æœ‰å˜æ›´éƒ½å·²æäº¤åˆ° main åˆ†æ”¯
- [ ] å·²ä¸ºé‡è¦å˜æ›´æ·»åŠ äº† changeset æ–‡ä»¶
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ (`pnpm test`)
- [ ] æ„å»ºæˆåŠŸ (`pnpm build:packages`)
- [ ] ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡ (`pnpm check:fix`)

### é¢„å‘å¸ƒç‰ˆæœ¬é¢å¤–æ£€æŸ¥

- [ ] ç‰ˆæœ¬å·æ ¼å¼æ­£ç¡®ï¼ˆå¦‚ `0.0.9-beta.0` æˆ– `0.0.9-rc.0`ï¼‰
- [ ] changeset æ–‡ä»¶ä¸­é€‰æ‹©äº†æ­£ç¡®çš„å‘å¸ƒç±»å‹ï¼ˆbeta/rcï¼‰
- [ ] ç›¸å…³æ–‡æ¡£å·²æ›´æ–°ï¼ˆå¦‚æœéœ€è¦ï¼‰
- [ ] æµ‹è¯•è®¡åˆ’å·²å®Œæˆï¼ˆç‰¹åˆ«æ˜¯æ–°åŠŸèƒ½ï¼‰

---

## ğŸš¨ æ³¨æ„äº‹é¡¹

### ç‰ˆæœ¬å·è§„åˆ™

- **æ­£å¼ç‰ˆæœ¬**: `1.2.3` (ä½¿ç”¨ latest æ ‡ç­¾)
- **Beta ç‰ˆæœ¬**: `1.2.3-beta.0` (ä½¿ç”¨ beta æ ‡ç­¾)
- **RC ç‰ˆæœ¬**: `1.2.3-rc.0` (ä½¿ç”¨ beta æ ‡ç­¾)

### Changeset é…ç½®

é¡¹ç›®é…ç½®äº†ä»¥ä¸‹ Changesets é€‰é¡¹ï¼š

- **å›ºå®šåŒ…**: `bestmcp`, `@bestmcp/server`, `@bestmcp/client` (ç‰ˆæœ¬åŒæ­¥æ›´æ–°)
- **å˜æ›´æ—¥å¿—**: ä½¿ç”¨ GitHub æ ¼å¼ï¼Œè‡ªåŠ¨å…³è” issue å’Œ PR
- **å‘å¸ƒæ ‡ç­¾**: æ ¹æ®ç‰ˆæœ¬å·è‡ªåŠ¨åˆ¤æ–­ (beta/rc â†’ beta, å…¶ä»– â†’ latest)

### å¸¸è§é—®é¢˜

**Q: å¦‚ä½•æŸ¥çœ‹å°†è¦å‘å¸ƒçš„å˜æ›´ï¼Ÿ**
```bash
# æŸ¥çœ‹æœªå‘å¸ƒçš„ changeset æ–‡ä»¶
pnpm changeset status
# æŸ¥çœ‹ç‰ˆæœ¬é¢„è§ˆ
pnpm changeset version --snapshot
```

**Q: å¦‚ä½•å‘å¸ƒç´§æ€¥ä¿®å¤ï¼Ÿ**
```bash
# åˆ›å»ºåªåŒ…å«ä¿®å¤çš„ changeset
pnpm changeset
# é€‰æ‹© patch ç±»å‹
# ç„¶åæŒ‰ç…§æ­£å¸¸æµç¨‹å‘å¸ƒ
```

**Q: å¦‚ä½•å‘å¸ƒé¢„å‘å¸ƒç‰ˆæœ¬ï¼Ÿ**
```bash
# åˆ›å»º changeset æ—¶é€‰æ‹©å‘å¸ƒç±»å‹
pnpm changeset
# é€‰æ‹©ç‰ˆæœ¬ç±»å‹ï¼šminor/patch
# é€‰æ‹©å‘å¸ƒç±»å‹ï¼šbeta/rc
```

**Q: å¦‚ä½•å®‰è£…ç‰¹å®šç‰ˆæœ¬çš„åŒ…ï¼Ÿ**
```bash
# å®‰è£…æœ€æ–°æ­£å¼ç‰ˆ
npm install bestmcp

# å®‰è£…æœ€æ–°çš„ beta ç‰ˆæœ¬
npm install bestmcp@beta

# å®‰è£…ç‰¹å®šç‰ˆæœ¬
npm install bestmcp@0.0.9-beta.0
npm install bestmcp@0.0.9
```

**Q: å‘å¸ƒå¤±è´¥å¦‚ä½•å›æ»šï¼Ÿ**
```bash
# NPM åŒ…æ— æ³•åˆ é™¤ï¼Œåªèƒ½å‘å¸ƒæ–°ç‰ˆæœ¬
# å¦‚éœ€å›æ»šä»£ç ï¼š
git reset --hard HEAD~1
git push origin main --force
```

**Q: é¢„å‘å¸ƒç‰ˆæœ¬ä¼šè‡ªåŠ¨æ›´æ–°åˆ°æ­£å¼ç‰ˆå—ï¼Ÿ**
ä¸ä¼šã€‚é¢„å‘å¸ƒç‰ˆæœ¬ï¼ˆbeta/rcï¼‰å’Œæ­£å¼ç‰ˆæœ¬æ˜¯ç‹¬ç«‹çš„å‘å¸ƒæµç¨‹ï¼š
- é¢„å‘å¸ƒç‰ˆæœ¬å‘å¸ƒåˆ° `beta` æ ‡ç­¾
- æ­£å¼ç‰ˆæœ¬å‘å¸ƒåˆ° `latest` æ ‡ç­¾
- éœ€è¦å•ç‹¬åˆ›å»ºæ­£å¼ç‰ˆæœ¬çš„ changeset æ¥å‘å¸ƒæ­£å¼ç‰ˆ

---

## ğŸ” éªŒè¯å‘å¸ƒ

å‘å¸ƒå®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

### éªŒè¯æ­£å¼ç‰ˆæœ¬

1. **NPM åŒ…çŠ¶æ€**
   ```bash
   npm view bestmcp
   npm view @bestmcp/client
   npm view @bestmcp/server
   ```

2. **Git æ ‡ç­¾**
   ```bash
   git tag --list "v*"
   # æŸ¥çœ‹ç‰¹å®šç‰ˆæœ¬
   git show v0.0.9
   ```

3. **GitHub Release**
   - è®¿é—® https://github.com/shenjingnan/bestmcp/releases
   - æ£€æŸ¥ Release å†…å®¹æ˜¯å¦æ­£ç¡®

4. **åŒ…å®‰è£…æµ‹è¯•**
   ```bash
   npm install bestmcp@latest
   ```

### éªŒè¯é¢„å‘å¸ƒç‰ˆæœ¬

1. **æ£€æŸ¥ NPM ä¸Šçš„ beta æ ‡ç­¾**
   ```bash
   # æŸ¥çœ‹ beta æ ‡ç­¾çš„æœ€æ–°ç‰ˆæœ¬
   npm view bestmcp@beta

   # æŸ¥çœ‹ç‰¹å®š beta ç‰ˆæœ¬ä¿¡æ¯
   npm view bestmcp@0.0.9-beta.0
   ```

2. **å®‰è£…æµ‹è¯•**
   ```bash
   # å®‰è£…æœ€æ–°çš„ beta ç‰ˆæœ¬
   npm install bestmcp@beta

   # å®‰è£…ç‰¹å®šçš„é¢„å‘å¸ƒç‰ˆæœ¬
   npm install bestmcp@0.0.9-beta.0
   npm install bestmcp@0.0.9-rc.0
   ```

3. **éªŒè¯é¢„å‘å¸ƒæ ‡è¯†**
   ```bash
   # æ£€æŸ¥å®‰è£…çš„ç‰ˆæœ¬å·
   npm list bestmcp
   # åº”è¯¥æ˜¾ç¤ºç±»ä¼¼ï¼š0.0.9-beta.0 æˆ– 0.0.9-rc.0
   ```

---

## ğŸ“š ç›¸å…³é“¾æ¥

- [Changesets å®˜æ–¹æ–‡æ¡£](https://github.com/changesets/changesets)
- [æœ¬é¡¹ç›®çš„ Changesets é…ç½®](../.changeset/config.json)
- [GitHub Actions è‡ªåŠ¨å‘å¸ƒå·¥ä½œæµ](../../.github/workflows/release.yml)
- [NPM åŒ…é¡µé¢ï¼ˆæ­£å¼ç‰ˆï¼‰](https://www.npmjs.com/package/bestmcp)
- [NPM åŒ…é¡µé¢ï¼ˆBeta ç‰ˆï¼‰](https://www.npmjs.com/package/bestmcp?activeTab=versions)