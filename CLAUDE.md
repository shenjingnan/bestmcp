# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## åŸºæœ¬è§„åˆ™

- **é‡è¦**: è¯·ä½¿ç”¨ä¸­æ–‡è¿›è¡Œæ‰€æœ‰æ²Ÿé€šå’Œä»£ç æ³¨é‡Š
- éµå¾ªé¡¹ç›®ä¸­æ—¢æœ‰çš„ä»£ç é£æ ¼å’Œå‘½åçº¦å®š
- æ‰€æœ‰æ–°å¢çš„ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£åº”ä½¿ç”¨ä¸­æ–‡

## å¼€å‘å‘½ä»¤

### æ„å»ºå’Œå¼€å‘

```bash
# ğŸ—ï¸ æ„å»ºå‘½ä»¤ (å¹¶è¡Œä¼˜åŒ–)
pnpm build              # æ„å»ºæ‰€æœ‰ packages/* (æ¨èæ—¥å¸¸ä½¿ç”¨)
pnpm build:packages     # æ„å»ºæ‰€æœ‰ packages/* é¡¹ç›®
pnpm build:examples     # æ„å»ºæ‰€æœ‰ examples/* é¡¹ç›®
pnpm build:all          # æ„å»ºæ‰€æœ‰é¡¹ç›® (packages + examples)

# ğŸš€ å¼€å‘å‘½ä»¤ (å¹¶è¡Œç›‘å¬)
pnpm dev                # å¼€å‘æ¨¡å¼ - æ‰€æœ‰ packages/* (æ¨èæ—¥å¸¸ä½¿ç”¨)
pnpm dev:packages       # å¼€å‘æ¨¡å¼ - æ‰€æœ‰ packages/* é¡¹ç›®
pnpm dev:examples       # å¼€å‘æ¨¡å¼ - æ‰€æœ‰ examples/* é¡¹ç›®
pnpm dev:all            # å¼€å‘æ¨¡å¼ - æ‰€æœ‰é¡¹ç›® (packages + examples)

# ğŸ§¹ ç»´æŠ¤å‘½ä»¤
pnpm clean              # æ¸…ç†æ„å»ºè¾“å‡º
pnpm type:check         # ç±»å‹æ£€æŸ¥ (ä¸ç”Ÿæˆæ–‡ä»¶)
```

### ğŸ” ä»£ç è´¨é‡æ£€æŸ¥æµç¨‹

**é‡è¦**: æ¯æ¬¡ä»£ç ä¿®æ”¹åéƒ½å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥æµç¨‹ï¼Œç¡®ä¿ä»£ç è´¨é‡ï¼š

```bash
# ğŸ“‹ æ ‡å‡†è´¨é‡æ£€æŸ¥æµç¨‹ (æŒ‰é¡ºåºæ‰§è¡Œ)
nr check:fix            # ä»£ç æ ¼å¼åŒ–å’Œè‡ªåŠ¨ä¿®å¤ (Biome)
nr type:check           # TypeScript ç±»å‹æ£€æŸ¥
nr test:silent          # é™é»˜æ‰§è¡Œæ‰€æœ‰æµ‹è¯•
nr spell:check          # æ‹¼å†™æ£€æŸ¥
```

#### æ£€æŸ¥æµç¨‹è¯´æ˜

1. **`nr check:fix`** - ä»£ç æ ¼å¼åŒ–
   - ä½¿ç”¨ Biome è¿›è¡Œä»£ç æ ¼å¼åŒ–å’Œ linting
   - è‡ªåŠ¨ä¿®å¤å¯¼å…¥æ’åºã€æ ¼å¼é—®é¢˜
   - ç¡®ä¿ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ

2. **`nr type:check`** - TypeScript ç±»å‹æ£€æŸ¥
   - æ‰§è¡Œå®Œæ•´çš„ TypeScript ç¼–è¯‘å™¨æ£€æŸ¥
   - ç¡®ä¿æ²¡æœ‰ç±»å‹é”™è¯¯æˆ–æœªå®šä¹‰çš„æ–¹æ³•/å±æ€§
   - éªŒè¯å¯¼å…¥å’Œç±»å‹å®šä¹‰æ­£ç¡®æ€§

3. **`nr test:silent`** - è‡ªåŠ¨åŒ–æµ‹è¯•
   - è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
   - ç¡®ä¿ä»£ç ä¿®æ”¹æ²¡æœ‰ç ´åç°æœ‰åŠŸèƒ½
   - éªŒè¯æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡

4. **`nr spell:check`** - æ‹¼å†™æ£€æŸ¥
   - ä½¿ç”¨ cspell æ£€æŸ¥ä»£ç ä¸­çš„æ‹¼å†™é”™è¯¯
   - åŒ…æ‹¬æ³¨é‡Šã€å˜é‡åã€æ–‡æ¡£å†…å®¹
   - ç¡®ä¿ä¸“ä¸šæ€§å’Œä¸€è‡´æ€§

#### è´¨é‡æ£€æŸ¥çš„é‡è¦æ€§

- **é˜²æ­¢å›å½’**: ç¡®ä¿ä»£ç ä¿®æ”¹ä¸ä¼šå¼•å…¥æ–°çš„é”™è¯¯
- **ä¿æŒä¸€è‡´æ€§**: ç»Ÿä¸€çš„ä»£ç é£æ ¼å’Œè´¨é‡æ ‡å‡†
- **æ—©æœŸå‘ç°é—®é¢˜**: åœ¨ä»£ç æäº¤å‰å‘ç°æ½œåœ¨é—®é¢˜
- **å›¢é˜Ÿåä½œ**: ä¿è¯æ‰€æœ‰å¼€å‘è€…éµå¾ªç›¸åŒçš„è´¨é‡æ ‡å‡†

### æ„å»ºç³»ç»Ÿè¯´æ˜

é¡¹ç›®ä½¿ç”¨ **tsup** ä½œä¸ºä¸»è¦æ„å»ºå·¥å…·ï¼ŒåŸºäº esbuild æä¾›æå¿«çš„æ„å»ºé€Ÿåº¦ï¼š

- **å¹¶è¡Œæ„å»º**ï¼šä½¿ç”¨ pnpm workspace è¿‡æ»¤è¯­æ³•å®ç° packages å’Œ examples çš„å¹¶è¡Œæ„å»º
- **æ€§èƒ½æå‡**ï¼šç›¸æ¯”ä¼ ç»Ÿä¸²è¡Œæ„å»ºï¼Œé€Ÿåº¦æå‡ 30-50%ï¼ŒCPU åˆ©ç”¨ç‡æå‡ 169%
- **æ ¸å¿ƒåŒ…**ï¼šè¾“å‡º ESM (`dist/index.mjs`) å’Œ CJS (`dist/index.js`) ä¸¤ç§æ ¼å¼
- **ç±»å‹å®šä¹‰**ï¼šä½¿ç”¨ tsc å•ç‹¬ç”Ÿæˆ (`dist/*.d.ts`)
- **ç¤ºä¾‹é¡¹ç›®**ï¼šä»…è¾“å‡º CJS æ ¼å¼ï¼Œä¾¿äºè¿è¡Œ
- **æ„å»ºæ—¶é—´**ï¼šé€šå¸¸åœ¨ 100-200ms å†…å®Œæˆï¼Œæ¯”ä¼ ç»Ÿ tsc å¿« 10-100 å€

### æ„å»ºæ¶æ„

```mermaid
graph TD
    A[æ ¹é¡¹ç›® bestmcp-workspace] --> B[packages/* é¡¹ç›®]
    A --> C[examples/* é¡¹ç›®]

    D[pnpm build] --> E[build:packages]
    D --> F[å¹¶è¡Œæ„å»º]

    E --> G[packages/server]
    E --> H[packages/client]
    E --> I[packages/bestmcp]

    F --> J[CPU: 269% åˆ©ç”¨ç‡]
    F --> K[æ—¶é—´: 27.1% å‡å°‘]

    L[pnpm dev] --> M[dev:packages]
    M --> N[å¹¶è¡Œç›‘å¬]
    N --> O[çƒ­é‡è½½æ‰€æœ‰åŒ…]
```

### æ¨èå¼€å‘å·¥ä½œæµ

**æ—¥å¸¸å¼€å‘**ï¼š
```bash
# å¯åŠ¨å¹¶è¡Œå¼€å‘æ¨¡å¼
pnpm dev

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œæµ‹è¯•
pnpm test:watch
```

**å…¨é‡å¼€å‘**ï¼š
```bash
# åŒæ—¶å¼€å‘æ‰€æœ‰é¡¹ç›®
pnpm dev:all
```

**æ„å»ºéªŒè¯**ï¼š
```bash
# å¿«é€ŸéªŒè¯æ ¸å¿ƒåŒ…
pnpm build

# å…¨é¢éªŒè¯
pnpm build:all
```

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test

# é™é»˜æ¨¡å¼è¿è¡Œæµ‹è¯•
pnpm test:silent

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pnpm test:coverage

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
pnpm test:watch

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pnpm test packages/server/tests/server.test.ts
```

### ä»£ç è´¨é‡

```bash
# ä»£ç æ ¼å¼åŒ–å’Œä¿®å¤ (ä½¿ç”¨ Biome)
pnpm check:fix

# æ‹¼å†™æ£€æŸ¥
pnpm spell:check
```

## é¡¹ç›®æ¶æ„

### æ•´ä½“ç»“æ„

è¿™æ˜¯ä¸€ä¸ª **monorepo** é¡¹ç›®ï¼Œä½¿ç”¨ pnpm workspace ç®¡ç†ã€‚æ ¸å¿ƒä»£ç ä½äº `packages/` ç›®å½•ä¸­ï¼ŒåŒ…æ‹¬ï¼š

- **`packages/server/`** - MCP æœåŠ¡å™¨æ¡†æ¶æ ¸å¿ƒä»£ç ï¼Œæä¾›è£…é¥°å™¨å’Œä¼ è¾“å±‚åŠŸèƒ½
- **`packages/client/`** - MCP å®¢æˆ·ç«¯åº“ä»£ç ï¼Œæä¾›è¿æ¥å’Œå·¥å…·è°ƒç”¨åŠŸèƒ½
- **`packages/bestmcp/`** - ä¸»å‘å¸ƒåŒ…ï¼Œèšåˆ server å’Œ client åŠŸèƒ½ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€ API

### æ ¸å¿ƒæ¨¡å—

#### åŒ…ç»“æ„å…³ç³»

```
packages/bestmcp (ä¸»å‘å¸ƒåŒ…)
â”œâ”€â”€ é‡æ–°å¯¼å‡º packages/server çš„æ‰€æœ‰åŠŸèƒ½
â”œâ”€â”€ é‡æ–°å¯¼å‡º packages/client çš„æ‰€æœ‰åŠŸèƒ½
â””â”€â”€ å¯¹å¤–æä¾›ç»Ÿä¸€çš„ bestmcp npm åŒ…

packages/server (æœåŠ¡å™¨æ¡†æ¶)
â”œâ”€â”€ è£…é¥°å™¨ç³»ç»Ÿ (@Tool, @Param)
â”œâ”€â”€ å‚æ•°éªŒè¯å’Œ JSON Schema è½¬æ¢
â”œâ”€â”€ ä¼ è¾“å±‚ç®¡ç† (STDIO, HTTP)
â””â”€â”€ MCP æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†

packages/client (å®¢æˆ·ç«¯åº“)
â”œâ”€â”€ MCP è¿æ¥ç®¡ç†
â”œâ”€â”€ å·¥å…·è°ƒç”¨å°è£…
â””â”€â”€ é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
```

#### packages/server ä¸»è¦æ–‡ä»¶

- **`server.ts`**: BestMCP ä¸»ç±»ï¼Œè´Ÿè´£æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€å·¥å…·æ³¨å†Œå’Œæ‰§è¡Œ
- **`decorators.ts`**: `@Tool` å’Œ `@Param` è£…é¥°å™¨çš„å®ç°ï¼Œä½¿ç”¨åå°„å…ƒæ•°æ®å­˜å‚¨å·¥å…·ä¿¡æ¯
- **`validation.ts`**: Zod schema éªŒè¯å’Œ JSON Schema è½¬æ¢é€»è¾‘
- **`types.ts`**: æ ¸å¿ƒç±»å‹å®šä¹‰å’Œæ¥å£
- **`errors.ts`**: è‡ªå®šä¹‰é”™è¯¯ç±»å®šä¹‰

#### packages/bestmcp ä¸»æ–‡ä»¶

- **`src/index.ts`**: ä¸»å…¥å£æ–‡ä»¶ï¼Œé‡æ–°å¯¼å‡º server å’Œ client çš„æ‰€æœ‰å…¬å…± API
- **`package.json`**: ä¸»å‘å¸ƒåŒ…é…ç½®ï¼Œä¾èµ– server å’Œ client ä½œä¸º workspace åŒ…

#### ä¼ è¾“å±‚æ¶æ„ (`transports/`)

- **`base.ts`**: ä¼ è¾“å±‚åŸºç±»å’Œé€šç”¨æ¥å£
- **`stdio.ts`**: æ ‡å‡†è¾“å…¥è¾“å‡ºä¼ è¾“å±‚å®ç°
- **`http.ts`**: HTTP ä¼ è¾“å±‚å®ç°ï¼Œæ”¯æŒ REST API è°ƒç”¨
- **`index.ts`**: ä¼ è¾“å±‚ç»Ÿä¸€å¯¼å‡º
- **`transport-manager.ts`**: ä¼ è¾“å±‚ç®¡ç†å™¨ï¼Œæ”¯æŒè¿è¡Œæ—¶åˆ‡æ¢ä¼ è¾“æ¨¡å¼

#### å…³é”®è®¾è®¡æ¨¡å¼

1. **è£…é¥°å™¨æ¨¡å¼**: ä½¿ç”¨ `@Tool` å’Œ `@Param` è£…é¥°å™¨å£°æ˜å¼å®šä¹‰å·¥å…·
2. **åå°„å…ƒæ•°æ®**: é€šè¿‡ `reflect-metadata` å­˜å‚¨å’Œè·å–å·¥å…·å‚æ•°ä¿¡æ¯
3. **ç­–ç•¥æ¨¡å¼**: ä¼ è¾“å±‚å¯æ’æ‹”ï¼Œæ”¯æŒ stdio å’Œ HTTP ä¸¤ç§æ¨¡å¼
4. **å·¥å‚æ¨¡å¼**: ä¼ è¾“å±‚ç®¡ç†å™¨æ ¹æ®é…ç½®åˆ›å»ºç›¸åº”çš„ä¼ è¾“å®ä¾‹

### æ ¸å¿ƒåŠŸèƒ½

#### å·¥å…·æ³¨å†Œæµç¨‹

1. ä½¿ç”¨ `@Tool` è£…é¥°å™¨æ ‡è®°æ–¹æ³•
2. ä½¿ç”¨ `@Param` è£…é¥°å™¨å®šä¹‰å‚æ•°éªŒè¯è§„åˆ™
3. é€šè¿‡ `mcp.register(ServiceClass)` æ³¨å†ŒæœåŠ¡ç±»
4. æ¡†æ¶è‡ªåŠ¨æå–è£…é¥°å™¨å…ƒæ•°æ®å¹¶ç”Ÿæˆ MCP å·¥å…·å®šä¹‰

#### å‚æ•°éªŒè¯ç³»ç»Ÿ

- åŸºäº **Zod** è¿›è¡Œè¿è¡Œæ—¶ç±»å‹éªŒè¯
- è‡ªåŠ¨å°† Zod Schema è½¬æ¢ä¸º JSON Schema
- æ”¯æŒå¤æ‚ç±»å‹ï¼šå¯¹è±¡ã€æ•°ç»„ã€æšä¸¾ã€å¯é€‰å‚æ•°
- æ™ºèƒ½å‚æ•°æ˜ å°„ï¼šå¯¹è±¡å‚æ•° â†” å¤šå‚æ•°è°ƒç”¨

#### ä¼ è¾“å±‚æ”¯æŒ

- **Stdio æ¨¡å¼**: ä¼ ç»Ÿçš„å‘½ä»¤è¡Œå·¥å…·é›†æˆæ–¹å¼
- **HTTP æ¨¡å¼**: REST API æ¥å£ï¼Œæ”¯æŒ Web åº”ç”¨é›†æˆ
- è¿è¡Œæ—¶å¯åˆ‡æ¢ä¼ è¾“å±‚ï¼Œæ— éœ€é‡å¯æœåŠ¡

## å¼€å‘æŒ‡å¯¼

### Import è§„èŒƒ

é¡¹ç›®å¼ºåˆ¶è¦æ±‚ **ç±»å‹å¯¼å…¥** å’Œ **å€¼å¯¼å…¥** åˆ†ç¦»ï¼Œä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œç±»å‹å®‰å…¨æ€§ï¼š

#### âœ… æ­£ç¡®çš„å†™æ³•

```typescript
// ç±»å‹å¯¼å…¥ä½¿ç”¨ import type
import type { User, Config } from "./types";
import type { ToolMetadata } from "@server/types";

// å€¼å¯¼å…¥ä½¿ç”¨æ™®é€š import
import { createUser, validateUser } from "./user-service";
import { z } from "zod";
```

#### âŒ é”™è¯¯çš„å†™æ³•

```typescript
// ä¸å…è®¸æ··åˆå¯¼å…¥
import { createUser, type User, type Config } from "./user-service";
import { z, type ZodSchema } from "zod";
```

#### é…ç½®è¯´æ˜

- **TypeScript**: `config/tsconfig.json` ä¸­å¯ç”¨äº† `"verbatimModuleSyntax": true`
- **Biome**: `config/biome.json` ä¸­é…ç½®äº† `"useImportType": { "style": "separatedType" }`
- **è‡ªåŠ¨ä¿®å¤**: ä½¿ç”¨ `pnpm check:fix` å¯ä»¥è‡ªåŠ¨ä¿®å¤å¤§éƒ¨åˆ†å¯¼å…¥é—®é¢˜
- **å¯¼å…¥é¡ºåº**: Biome ä¼šè‡ªåŠ¨å°†ç±»å‹å¯¼å…¥æ’åœ¨å€¼å¯¼å…¥ä¹‹å‰

### TypeScript é…ç½®è¦æ±‚

é¡¹ç›®å¯ç”¨äº†ä»¥ä¸‹ TypeScript ç‰¹æ€§ï¼š

- `experimentalDecorators: true` - å¯ç”¨è£…é¥°å™¨æ”¯æŒ
- `emitDecoratorMetadata: true` - å¯ç”¨è£…é¥°å™¨å…ƒæ•°æ®
- `strict: true` - ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- `verbatimModuleSyntax: true` - å¼ºåˆ¶ç±»å‹å’Œå€¼å¯¼å…¥åˆ†ç¦»

### æµ‹è¯•æ¡†æ¶

- ä½¿ç”¨ **Vitest** ä½œä¸ºæµ‹è¯•æ¡†æ¶
- æµ‹è¯•æ–‡ä»¶ä½äº `packages/server/tests/` ç›®å½•
- æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šå¯é€šè¿‡ `pnpm test:coverage` ç”Ÿæˆ
- æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹åº”ä½¿ç”¨ä¸­æ–‡æè¿°

### ä»£ç è´¨é‡å·¥å…·

- ä½¿ç”¨ **Biome** è¿›è¡Œä»£ç æ ¼å¼åŒ–å’Œ linting
- é…ç½®æ–‡ä»¶ï¼š`config/biome.json`
- æ”¯æŒè‡ªåŠ¨å¯¼å…¥æ’åºå’Œä»£ç ä¿®å¤
- ä½¿ç”¨ **cspell** è¿›è¡Œæ‹¼å†™æ£€æŸ¥

### é”™è¯¯å¤„ç†

é¡¹ç›®å®šä¹‰äº†ä¸“é—¨çš„é”™è¯¯ç±»å‹ï¼š

- `ToolNotFoundError`: å·¥å…·æœªæ‰¾åˆ°é”™è¯¯
- `ToolValidationError`: å·¥å…·å‚æ•°éªŒè¯é”™è¯¯
- `ZodValidationError`: Zod éªŒè¯é”™è¯¯

### ç¤ºä¾‹ä»£ç 

æŸ¥çœ‹ `examples/` ç›®å½•ä¸­çš„å®Œæ•´ä½¿ç”¨ç¤ºä¾‹ï¼š

- `stdio-mcp/`: åŸºç¡€ STDIO æœåŠ¡ç¤ºä¾‹
- `http-mcp/`: åŸºç¡€ HTTP æœåŠ¡ç¤ºä¾‹
- æ¼”ç¤ºäº†è£…é¥°å™¨çš„ä½¿ç”¨æ–¹æ³•å’Œä¸åŒä¼ è¾“å±‚çš„å¯åŠ¨æ–¹å¼

### API ä½¿ç”¨æ¨¡å¼

```typescript
// 1. å®šä¹‰æœåŠ¡ç±»
class MyService {
  @Tool("å·¥å…·æè¿°")
  async myMethod(
    @Param(z.string(), "å‚æ•°æè¿°") param: string
  ): Promise<string> {
    return `å¤„ç†ç»“æœ: ${param}`;
  }
}

// 2. åˆ›å»ºå’Œé…ç½® MCP æœåŠ¡å™¨
const mcp = new BestMCP({
  name: "my-service",
  version: "1.0.0",
});

// 3. æ³¨å†ŒæœåŠ¡
mcp.register(MyService);

// 4. å¯åŠ¨æœåŠ¡å™¨ (æ”¯æŒå¤šç§ä¼ è¾“å±‚)
await mcp.run(); // é»˜è®¤ stdio æ¨¡å¼
await mcp.run({ transport: "http", port: 3000 }); // HTTP æ¨¡å¼
```

## å¸¸è§å¼€å‘ä»»åŠ¡

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ç°æœ‰æœåŠ¡ç±»ä¸­æ·»åŠ æ–¹æ³•
2. ä½¿ç”¨ `@Tool` è£…é¥°å™¨å¹¶æä¾›æè¿°
3. ä¸ºæ¯ä¸ªå‚æ•°ä½¿ç”¨ `@Param` è£…é¥°å™¨å®šä¹‰ Zod éªŒè¯è§„åˆ™
4. ç¼–å†™ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹

### æ‰©å±•ä¼ è¾“å±‚

1. åœ¨ `transports/` ç›®å½•åˆ›å»ºæ–°çš„ä¼ è¾“å±‚ç±»
2. ç»§æ‰¿ `BaseTransport` å¹¶å®ç°å¿…è¦æ–¹æ³•
3. åœ¨ `transport-manager.ts` ä¸­æ³¨å†Œæ–°çš„ä¼ è¾“ç±»å‹
4. æ›´æ–°ç±»å‹å®šä¹‰

### è°ƒè¯•å·¥å…·æ‰§è¡Œ

- ä½¿ç”¨ `mcp.getToolList()` æŸ¥çœ‹å·²æ³¨å†Œå·¥å…·
- ä½¿ç”¨ `mcp.validateTool(name, args)` éªŒè¯å‚æ•°
- ä½¿ç”¨ `mcp.getToolStats()` è·å–ç»Ÿè®¡ä¿¡æ¯
- æ£€æŸ¥æ§åˆ¶å°è¾“å‡ºçš„å·¥å…·æ³¨å†Œä¿¡æ¯

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### TypeScript ç±»å‹é”™è¯¯

#### å¸¸è§é”™è¯¯ç±»å‹

1. **æ–¹æ³•æœªå®šä¹‰é”™è¯¯**
   ```
   Property 'xxx' does not exist on type 'YYY'
   ```
   **è§£å†³æ–¹æ¡ˆ**:
   - æ£€æŸ¥æ–¹æ³•æ˜¯å¦åœ¨ç±»ä¸­æ­£ç¡®å£°æ˜
   - ç¡®è®¤æ–¹æ³•åç§°æ‹¼å†™æ­£ç¡®
   - éªŒè¯è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublic/private/protectedï¼‰

2. **å¯¼å…¥è·¯å¾„é”™è¯¯**
   ```
   Cannot find module 'xxx' or its corresponding type declarations
   ```
   **è§£å†³æ–¹æ¡ˆ**:
   - æ£€æŸ¥å¯¼å…¥è·¯å¾„æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ç›®æ ‡æ¨¡å—æ˜¯å¦å·²å¯¼å‡º
   - è¿è¡Œ `pnpm install` æ›´æ–°ä¾èµ–

3. **ç±»å‹ä¸å…¼å®¹é”™è¯¯**
   ```
   Type 'X' is not assignable to type 'Y'
   ```
   **è§£å†³æ–¹æ¡ˆ**:
   - æ£€æŸ¥ç±»å‹å®šä¹‰æ˜¯å¦åŒ¹é…
   - ä½¿ç”¨ç±»å‹æ–­è¨€æˆ–ç±»å‹å®ˆå«
   - ç¡®è®¤å¯é€‰å±æ€§çš„å¤„ç†æ–¹å¼

#### ç±»å‹é”™è¯¯ä¿®å¤æµç¨‹

1. **è¿è¡Œç±»å‹æ£€æŸ¥**: `nr type:check`
2. **å®šä½é”™è¯¯**: æ ¹æ®é”™è¯¯ä¿¡æ¯å’Œè¡Œå·å®šä½é—®é¢˜
3. **åˆ†æåŸå› **: ç¡®å®šæ˜¯å®šä¹‰é—®é¢˜ã€å¯¼å…¥é—®é¢˜è¿˜æ˜¯ä½¿ç”¨é—®é¢˜
4. **å®æ–½ä¿®å¤**: æ·»åŠ ç¼ºå¤±çš„æ–¹æ³•ã€ä¿®æ­£å¯¼å…¥æˆ–è°ƒæ•´ç±»å‹å®šä¹‰
5. **éªŒè¯ä¿®å¤**: é‡æ–°è¿è¡Œç±»å‹æ£€æŸ¥ç¡®ä¿é—®é¢˜è§£å†³

#### å…¸å‹ä¿®å¤ç¤ºä¾‹

**æ·»åŠ ç¼ºå¤±æ–¹æ³•**:
```typescript
// é”™è¯¯ï¼šProperty 'initializeMCPServer' does not exist
class BestMCP {
  constructor(config: BestMCPConfig) {
    this.initializeMCPServer(config); // æ–¹æ³•æœªå®šä¹‰
  }

  // ä¿®å¤ï¼šæ·»åŠ ç¼ºå¤±çš„ç§æœ‰æ–¹æ³•
  private initializeMCPServer(config: BestMCPConfig): void {
    this.server = new Server(
      { name: this.name, version: this.version },
      { capabilities: config.capabilities || { tools: {} } }
    );
  }
}
```

**å¤„ç†å¯é€‰å±æ€§**:
```typescript
// é”™è¯¯ï¼šType 'undefined' is not assignable to type 'string'
const options = {
  instructions: config.instructions, // å¯èƒ½æ˜¯ undefined
};

// ä¿®å¤ï¼šæ¡ä»¶æ€§æ·»åŠ å±æ€§
const options: any = {
  capabilities: config.capabilities || { tools: {} },
};
if (config.instructions) {
  options.instructions = config.instructions;
}
```
